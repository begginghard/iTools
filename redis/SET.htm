<h3>1. 命令</h3><p>SET -- 将字符串 Value 关联到 Key</p><h3>2. 使用说明</h3><ul class=\" list-paddingleft-2\" style=\"list-style-type: disc;\"><li><h4>SET key value [EX seconds] [PX milliseconds] [NX|XX]</h4></li></ul><blockquote><p>将字符串值 value 关联到 key 。</p><p>如果 key 已经持有其他值， SET 就覆写旧值，无视类型。</p><p>对于某个原本带有生存时间（TTL）的键来说， 当 SET 命令成功在这个键上执行时， 这个键原有的 TTL 将被清除。</p></blockquote><ul class=\" list-paddingleft-2\" style=\"list-style-type: disc;\"><li><h4>可选参数</h4></li></ul><blockquote><p>从 Redis 2.6.12 版本开始， SET 命令的行为可以通过一系列参数来修改：</p><p>EX second ：设置键的过期时间为 second 秒。 SET key value EX second 效果等同于 SETEX key second value 。</p><p>PX millisecond ：设置键的过期时间为 millisecond 毫秒。 SET key value PX millisecond 效果等同于 PSETEX key millisecond value 。</p><p>NX ：只在键不存在时，才对键进行设置操作。 SET key value NX 效果等同于 SETNX key value 。</p><p>XX ：只在键已经存在时，才对键进行设置操作。</p><p>因为 SET 命令可以通过参数来实现和 SETNX 、 SETEX 和 PSETEX 三个命令的效果，所以将来的 Redis 版本可能会废弃并最终移除 SETNX 、 SETEX 和 PSETEX 这三个命令。</p><ul class=\" list-paddingleft-2\" style=\"list-style-type: disc;\"><li><h4>可用版本</h4></li></ul></blockquote><blockquote><p>&nbsp;&gt;= 1.0.0</p></blockquote><ul class=\" list-paddingleft-2\" style=\"list-style-type: disc;\"><li><h4>时间复杂度</h4></li></ul><blockquote><p>&nbsp;O(1)</p></blockquote><ul class=\" list-paddingleft-2\" style=\"list-style-type: disc;\"><li><h4>返回值</h4></li></ul><blockquote><p>在 Redis 2.6.12 版本以前， SET 命令总是返回 OK 。</p><p>从 Redis 2.6.12 版本开始， SET 在设置操作成功完成时，才返回 OK 。</p><p>如果设置了 NX 或者 XX ，但因为条件没达到而造成设置操作未执行，那么命令返回空批量回复（NULL Bulk Reply）。</p></blockquote><h3>3. 使用样例</h3><pre class=\"brush:bash;toolbar:false\">#&nbsp;对不存在的键进行设置

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key&nbsp;&quot;value&quot;
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;key
&quot;value&quot;


#&nbsp;对已存在的键进行设置

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key&nbsp;&quot;new-value&quot;
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;key
&quot;new-value&quot;


#&nbsp;使用&nbsp;EX&nbsp;选项

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key-with-expire-time&nbsp;&quot;hello&quot;&nbsp;EX&nbsp;10086
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;key-with-expire-time
&quot;hello&quot;

redis&nbsp;127.0.0.1:6379&gt;&nbsp;TTL&nbsp;key-with-expire-time
(integer)&nbsp;10069


#&nbsp;使用&nbsp;PX&nbsp;选项

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key-with-pexpire-time&nbsp;&quot;moto&quot;&nbsp;PX&nbsp;123321
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;key-with-pexpire-time
&quot;moto&quot;

redis&nbsp;127.0.0.1:6379&gt;&nbsp;PTTL&nbsp;key-with-pexpire-time
(integer)&nbsp;111939


#&nbsp;使用&nbsp;NX&nbsp;选项

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;not-exists-key&nbsp;&quot;value&quot;&nbsp;NX
OK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;键不存在，设置成功

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;not-exists-key
&quot;value&quot;

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;not-exists-key&nbsp;&quot;new-value&quot;&nbsp;NX
(nil)&nbsp;&nbsp;&nbsp;#&nbsp;键已经存在，设置失败

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GEt&nbsp;not-exists-key
&quot;value&quot;&nbsp;#&nbsp;维持原值不变


#&nbsp;使用&nbsp;XX&nbsp;选项

redis&nbsp;127.0.0.1:6379&gt;&nbsp;EXISTS&nbsp;exists-key
(integer)&nbsp;0

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;exists-key&nbsp;&quot;value&quot;&nbsp;XX
(nil)&nbsp;&nbsp;&nbsp;#&nbsp;因为键不存在，设置失败

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;exists-key&nbsp;&quot;value&quot;
OK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;先给键设置一个值

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;exists-key&nbsp;&quot;new-value&quot;&nbsp;XX
OK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;设置新值成功

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;exists-key
&quot;new-value&quot;


#&nbsp;NX&nbsp;或&nbsp;XX&nbsp;可以和&nbsp;EX&nbsp;或者&nbsp;PX&nbsp;组合使用

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key-with-expire-and-NX&nbsp;&quot;hello&quot;&nbsp;EX&nbsp;10086&nbsp;NX
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;key-with-expire-and-NX
&quot;hello&quot;

redis&nbsp;127.0.0.1:6379&gt;&nbsp;TTL&nbsp;key-with-expire-and-NX
(integer)&nbsp;10063

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key-with-pexpire-and-XX&nbsp;&quot;old&nbsp;value&quot;
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key-with-pexpire-and-XX&nbsp;&quot;new&nbsp;value&quot;&nbsp;PX&nbsp;123321
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;GET&nbsp;key-with-pexpire-and-XX
&quot;new&nbsp;value&quot;

redis&nbsp;127.0.0.1:6379&gt;&nbsp;PTTL&nbsp;key-with-pexpire-and-XX
(integer)&nbsp;112999


#&nbsp;EX&nbsp;和&nbsp;PX&nbsp;可以同时出现，但后面给出的选项会覆盖前面给出的选项

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;key&nbsp;&quot;value&quot;&nbsp;EX&nbsp;1000&nbsp;PX&nbsp;5000000
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;TTL&nbsp;key
(integer)&nbsp;4993&nbsp;&nbsp;#&nbsp;这是&nbsp;PX&nbsp;参数设置的值

redis&nbsp;127.0.0.1:6379&gt;&nbsp;SET&nbsp;another-key&nbsp;&quot;value&quot;&nbsp;PX&nbsp;5000000&nbsp;EX&nbsp;1000
OK

redis&nbsp;127.0.0.1:6379&gt;&nbsp;TTL&nbsp;another-key
(integer)&nbsp;997&nbsp;&nbsp;&nbsp;#&nbsp;这是&nbsp;EX&nbsp;参数设置的值</pre><p><br/></p>